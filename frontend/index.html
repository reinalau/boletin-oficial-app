<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boletín Oficial - Análisis Inteligente</title>

    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <!-- Estilos -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">

    <!-- Meta tags para Telegram -->
    <meta name="theme-color" content="#0088cc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">


    <link rel="icon" href="images/logo.png" type="image/png">

</head>

<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-content">
            <div class="logo-section">
                <svg class="logo" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
                </svg>
                <h1 class="app-title">Boletín Oficial Argentina</h1>
            </div>
            <div class="header-subtitle">
                <p>Análisis Inteligente de 1ra Sección-Legislación y Avisos Oficiales</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Date Selector -->
        <section class="date-selector">
            <div class="selector-header">
                <h2>Seleccionar Fecha</h2>
                <p>Elige la fecha del boletín que deseas analizar</p>
            </div>

            <div class="date-input-container">
                <label for="date-picker" class="date-label">
                    <svg class="calendar-icon" viewBox="0 0 24 24">
                        <path
                            d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z" />
                    </svg>
                    Fecha del Boletín
                </label>
                <input type="date" id="date-picker" class="date-input" max="" value="">
            </div>

            <div class="options-container">
                <label class="checkbox-container">
                    <input type="checkbox" id="force-reanalysis" class="checkbox-input">
                    <span class="checkbox-custom"></span>
                    <span class="checkbox-label">Forzar reanálisis (ignorar caché)</span>
                </label>
            </div>

            <button id="analyze-btn" class="analyze-button" disabled>
                <span class="button-text">Analizar Boletín</span>
                <svg class="button-icon" viewBox="0 0 24 24">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
                </svg>
            </button>
        </section>

        <!-- Results Section -->
        <section id="results-section" class="results-section hidden">
            <div class="results-header">
                <h2>Análisis del Boletín</h2>
                <div class="results-meta">
                    <span class="date-badge" id="results-date"></span>
                    <span class="cache-badge" id="cache-status"></span>
                </div>
            </div>

            <!-- Resumen Ejecutivo -->
            <div class="analysis-card">
                <div class="card-header">
                    <h3>
                        <svg class="card-icon" viewBox="0 0 24 24">
                            <path
                                d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
                        </svg>
                        Resumen Ejecutivo
                    </h3>
                </div>
                <div class="card-content">
                    <p id="analysis-summary"></p>
                </div>
            </div>

            <!-- Cambios Principales -->
            <div class="analysis-card">
                <div class="card-header">
                    <h3>
                        <svg class="card-icon" viewBox="0 0 24 24">
                            <path
                                d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z" />
                        </svg>
                        Cambios Principales
                    </h3>
                </div>
                <div class="card-content">
                    <div id="main-changes" class="changes-list"></div>
                </div>
            </div>

            <!-- Áreas Afectadas -->
            <div class="analysis-card">
                <div class="card-header">
                    <h3>
                        <svg class="card-icon" viewBox="0 0 24 24">
                            <path d="M12,2L13.09,8.26L22,9L13.09,9.74L12,16L10.91,9.74L2,9L10.91,8.26L12,2Z" />
                        </svg>
                        Áreas Afectadas
                    </h3>
                </div>
                <div class="card-content">
                    <div id="affected-areas" class="areas-tags"></div>
                </div>
            </div>

            <!-- Impacto Estimado -->
            <div class="analysis-card">
                <div class="card-header">
                    <h3>
                        <svg class="card-icon" viewBox="0 0 24 24">
                            <path
                                d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
                        </svg>
                        Impacto Estimado
                    </h3>
                </div>
                <div class="card-content">
                    <p id="estimated-impact"></p>
                </div>
            </div>

            <!-- Opiniones de Expertos -->
            <div class="analysis-card" id="expert-opinions-card">
                <div class="card-header">
                    <h3>
                        <svg class="card-icon" viewBox="0 0 24 24">
                            <path
                                d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z" />
                        </svg>
                        Opiniones de Expertos
                    </h3>
                </div>
                <div class="card-content">
                    <div id="expert-opinions" class="opinions-list"></div>
                </div>
            </div>

            <!-- Acciones -->
            <div class="results-actions">
                <!-- <button id="share-btn" class="action-button secondary">
                    <svg class="button-icon" viewBox="0 0 24 24">
                        <path
                            d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z" />
                    </svg>
                  Compartir 
                </button> -->
                <button id="new-analysis-btn" class="action-button primary">
                    <svg class="button-icon" viewBox="0 0 24 24">
                        <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" />
                    </svg>
                    Nuevo Análisis
                </button>
            </div>
        </section>
    </main>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <h3 class="loading-title">Analizando Boletín</h3>
            <p class="loading-message">Procesando normativa con IA...</p>
            <div class="loading-progress">
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
                <span class="progress-text">Estimado: 30-60 segundos</span>
            </div>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="error-modal" class="error-modal hidden">
        <div class="error-content">
            <div class="error-icon">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z" />
                </svg>
            </div>
            <h3 id="error-title">Error</h3>
            <p id="error-message">Ha ocurrido un error inesperado</p>
            <div class="error-actions">
                <button id="retry-btn" class="error-button primary">Reintentar</button>
                <button id="close-error-btn" class="error-button secondary">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/telegram.js"></script>
    <script src="js/app.js"></script>
</body>

</html>